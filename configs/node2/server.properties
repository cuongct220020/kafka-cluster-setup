node.id=2
process.roles=broker,controller

listeners=PLAINTEXT://:29092,CONTROLLER://:29093,PLAINTEXT_HOST://:9092
advertised.listeners=PLAINTEXT://kafka-2:29092,PLAINTEXT_HOST://localhost:9092

listener.security.protocol.map=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
inter.broker.listener.name=PLAINTEXT
controller.listener.names=CONTROLLER

controller.quorum.voters=1@kafka-1:29093,2@kafka-2:29093,3@kafka-3:29093

log.dirs=/var/lib/kafka/data


# Topic defaults
num.partitions=3
default.replication.factor=3

# Group coordinator settings
group.coordinator.threads=8
group.initial.rebalance.delay.ms=0

# Background threads
background.threads=10
compression.type=lz4

# Topic auto-creation and deletion
auto.create.topics.enable=false
delete.topic.enable=true
auto.leader.rebalance.enable=true
leader.imbalance.check.interval.seconds=300

# Log storage & retention
log.segment.bytes=1073741824
log.segment.delete.delay.ms=60000
log.flush.interval.messages=10000
log.flush.interval.ms=1000
log.flush.offset.checkpoint.interval.ms=60000
log.flush.scheduler.interval.ms=9223372036854775807
log.flush.start.offset.checkpoint.interval.ms=60000
log.retention.bytes=-1
log.retention.hours=168
log.retention.check.interval.ms=300000
log.roll.ms=86400000

# Metadata log settings
metadata.log.dir=/var/lib/kafka-cluster/metadata
metadata.log.max.record.bytes.between.snapshots=20971520
metadata.log.max.snapshot.interval.ms=3600000
metadata.log.segment.bytes=1073741824
metadata.log.segment.ms=604800000
metadata.max.retention.bytes=-1
metadata.max.retention.ms=60480000

# Replica configuration
min.insync.replicas=2
num.io.threads=8
num.network.threads=8
num.recovery.threads.per.data.dir=1
num.replica.alter.log.dirs.threads=2
num.replica.fetchers=4

# Offset management for consumer groups
offsets.commit.timeout.ms=5000
offsets.load.buffer.size=5242880
offsets.retention.check.interval.ms=600000
offsets.retention.minutes=10080
offsets.topic.compression.codec=1
offsets.topic.num.partitions=50
offsets.topic.replication.factor=3
offsets.topic.segment.bytes=104857600

# Replica fetch configuration
replica.fetch.min.bytes=1048576
replica.fetch.wait.max.ms=500
replica.high.watermark.checkpoint.interval.ms=5000
replica.lag.time.max.ms=10000
replica.socket.receive.buffer.bytes=1048576
replica.socket.timeout.ms=60000

# Socket and network buffers
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600
socket.send.buffer.bytes=102400

# Request and queue control
queued.max.requests=500
request.timeout.ms=30000

# Unclean leader election control
unclean.leader.election.enable=false